@{
    ViewData["Title"] = "Menu - DeliFood";
}

<div class="menu-container">
    <h1 class="menu-title">Cardápio - DeliFood</h1>
    <p class="menu-subtitle">Conheça nossos deliciosos pratos</p>

    <div class="menu-wrapper">
        <div class="food-items">
            <div class="food-card">
                <input type="checkbox" class="food-checkbox" data-name="Hambúrguer Artesanal" data-price="22.90">
                <img src="https://imgs.search.brave.com/Btg1zZWRscVClUKMhAtfCOdhMK4cxiWQzzW1wpHtmCA/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/Zm90b3MtZ3JhdGlz/L2RlbGljaW9zby1o/YW1idXJndWVyLWVt/LWVzdHVkaW9fMjMt/MjE1MTg0NjUwNS5q/cGc_c2VtdD1haXNf/aHlicmlkJnc9NzQw/JnE9ODA"
                    alt="Hambúrguer">
                <div class="food-info">
                    <h3>Hambúrguer Artesanal</h3>
                    <p class="description">Pão integral, carne 180g, alface, tomate e molho especial</p>
                    <p class="price">R$ 22,90</p>
                    <button class="btn-order">Pedir Agora</button>
                </div>
            </div>

            <div class="food-card">
                <input type="checkbox" class="food-checkbox" data-name="Batata Frita Crocante" data-price="8.90">
                <img src="https://imgs.search.brave.com/A3aaK75wyGbE-3458ipEDUw1ZKIL04RQUtPLUZjpn9o/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9zdDMu/ZGVwb3NpdHBob3Rv/cy5jb20vMTMzNDk0/OTQvMTkzMzkvaS80/NTAvZGVwb3NpdHBo/b3Rvc18xOTMzOTU2/NDQtc3RvY2stcGhv/dG8tY2xvc2Utc2hv/dC10YXN0eS1mcmVu/Y2gtZnJpZXMuanBn"
                    alt="Batata Frita">
                <div class="food-info">
                    <h3>Batata Frita</h3>
                    <p class="description">Batata média, sal e molho a gosto</p>
                    <p class="price">R$ 8,90</p>
                    <button class="btn-order">Pedir Agora</button>
                </div>
            </div>

            <div class="food-card">
                <input type="checkbox" class="food-checkbox" data-name="Nuggets de Frango" data-price="15.90">
                <img src="https://imgs.search.brave.com/3JTX_8qGapYia05u6T9vvrPDVBUsuXmyOpsAWCphnLs/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/Zm90b3MtcHJlbWl1/bS9udWdnZXRzLWRl/LWZyYW5nby1mYXN0/LWZvb2QtY29tLWtl/dGNodXAtZW0tdW0t/ZnVuZG8tZXNjdXJv/XzEzNTQyNy01Mjk2/LmpwZz9zZW10PWFp/c19oeWJyaWQ"
                    alt="Nuggets">
                <div class="food-info">
                    <h3>Nuggets de Frango</h3>
                    <p class="description">12 unidades de frango empanado, acompanha catupiry, mostarda ou ketchup</p>
                    <p class="price">R$ 15,90</p>
                    <button class="btn-order">Pedir Agora</button>
                </div>
            </div>

            <div class="food-card">
                <input type="checkbox" class="food-checkbox" data-name="Pizza Italiana" data-price="35.90">
                <img src="https://imgs.search.brave.com/UASaMNe13gTmsAMP5Ciytk3AQFyuMc5mBPWCil0mXx4/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/Zm90b3MtZ3JhdGlz/L3BpenphLWl0YWxp/YW5hLWZyZXNjYS1j/b20taWEtZ2VuZXJh/dGl2YS1kZS1mYXRp/YS1kZS1xdWVpam8t/bXVzc2FyZWxhXzE4/ODU0NC0xMjM0Ny5q/cGc_c2VtdD1haXNf/aHlicmlkJnc9NzQw"
                    alt="Pizza">
                <div class="food-info">
                    <h3>Pizza Italiana</h3>
                    <p class="description">Massa artesanal, mussarela, presunto, abacaxi e queijo</p>
                    <p class="price">R$ 35,90</p>
                    <button class="btn-order">Pedir Agora</button>
                </div>
            </div>

            <div class="food-card">
                <input type="checkbox" class="food-checkbox" data-name="Combo Sushi Premium" data-price="48.90">
                <img src="https://imgs.search.brave.com/7yNYmXlHgbVIPQoZO-KpTmwcFfKNL4n5ovCCV1mSiWU/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRp/YS5pc3RvY2twaG90/by5jb20vaWQvNjkw/NDUxNTgwL3B0L2Zv/dG8vamFwYW5lc2Ut/Y3Vpc2luZS5qcGc_/cz02MTJ4NjEyJnc9/MCZrPTIwJmM9Zlpj/N0h2OFd5bDgtbk42/WG8tTWk3SVdURjVf/eE5JU0RUdkZ2NkN0/ZkhmTT0"
                    alt="Sushi">
                <div class="food-info">
                    <h3>Combo Sushi Premium</h3>
                    <p class="description">12 unidades: sushi, sashimi e hot roll</p>
                    <p class="price">R$ 48,90</p>
                    <button class="btn-order">Pedir Agora</button>
                </div>
            </div>

            <div class="food-card">
                <input type="checkbox" class="food-checkbox" data-name="Salgados Sortidos" data-price="12.90">
                <img src="https://imgs.search.brave.com/ib8sIWukqrfCZBRCsXMe94pyOt0BRkmWb7TYxe3U3jc/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9pbWcu/ZnJlZXBpay5jb20v/Zm90b3MtZ3JhdGlz/L2JvbGluaGEtY29t/LWNyb3F1ZXRlcy1l/LWd1YXJkYW5hcG8t/ZW0tZnVuZG8tZGVz/YXRpdmFkb18yMy0y/MTQ5MzA2NjYzLmpw/Zz9zZW10PWFpc19o/eWJyaWQmdz03NDAm/cT04MA"
                    alt="Salgados">
                <div class="food-info">
                    <h3>40 Coxinhas + molho tradicional</h3>
                    <p class="description">Coxinha, enroladinho,quibe e bolinha de queijo - 8 peças cada</p>
                    <p class="price">R$ 12,90</p>
                    <button class="btn-order">Pedir Agora</button>
                </div>
            </div>
        </div>

        <div class="cart-sidebar">
            <h2>Carrinho</h2>
            <div id="cart-items" class="cart-items">
                <p class="empty-cart">Nenhum item selecionado</p>
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <strong>Total:</strong>
                    <span id="total-price">R$ 0,00</span>
                </div>
                <button class="btn-checkout">Finalizar Pedido</button>
            </div>
        </div>
    </div>
</div>

<script>
    const checkboxes = document.querySelectorAll('.food-checkbox');
    const cartItemsDiv = document.getElementById('cart-items');
    const totalPriceSpan = document.getElementById('total-price');
    const checkoutBtn = document.querySelector('.btn-checkout');

    function updateCart() {
        const selected = [];
        let total = 0;

        checkboxes.forEach(checkbox => {
            if (checkbox.checked) {
                const name = checkbox.dataset.name;
                const price = parseFloat(checkbox.dataset.price);
                selected.push({ name, price });
                total += price;
            }
        });

        if (selected.length === 0) {
            cartItemsDiv.innerHTML = '<p class="empty-cart">Nenhum item selecionado</p>';
        } else {
            cartItemsDiv.innerHTML = selected.map((item, index) =>
                `<div class="cart-item">
                    <span>${item.name}</span>
                    <span class="item-price">R$ ${item.price.toFixed(2)}</span>
                </div>`
            ).join('');
        }

        totalPriceSpan.textContent = `R$ ${total.toFixed(2)}`;
    }

    checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', updateCart);
    });

    checkoutBtn.addEventListener('click', function () {
        const selected = [];
        let total = 0;

        checkboxes.forEach(checkbox => {
            if (checkbox.checked) {
                const name = checkbox.dataset.name;
                const price = parseFloat(checkbox.dataset.price);
                selected.push({ name, price });
                total += price;
            }
        });

        if (selected.length === 0) {
            alert('Por favor, selecione pelo menos um item antes de finalizar o pedido!');
            return;
        }

        const totalFormatted = `R$ ${total.toFixed(2)}`;
        const itemsList = selected.map(item => `${item.name}`).join('<br>');

        const modal = document.createElement('div');
        modal.className = 'thank-you-modal';
        modal.innerHTML = `
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Obrigado pelo Pedido! 🎉</h2>
                </div>
                <div class="modal-body">
                    <p>Seu pedido foi confirmado com sucesso!</p>
                    <hr>
                    <div class="order-details">
                        <h3>Itens do Pedido:</h3>
                        <div class="items-list">${itemsList}</div>
                        <hr>
                        <div class="order-total">
                            <strong>Valor Total:</strong>
                            <strong class="total-value">${totalFormatted}</strong>
                        </div>
                    </div>
                    <p class="delivery-message">Seu pedido será entregue em breve. Acompanhe a entrega no seu perfil!</p>
                </div>
                <div class="modal-footer">
                    <button class="btn-close-modal">Voltar ao Menu</button>
                </div>
            </div>
        `;

        document.body.appendChild(modal);

        const closeBtn = modal.querySelector('.btn-close-modal');
        closeBtn.addEventListener('click', function () {
            modal.remove();

            checkboxes.forEach(checkbox => checkbox.checked = false);
            updateCart();
        });

        modal.addEventListener('click', function (e) {
            if (e.target === modal) {
                modal.remove();
                checkboxes.forEach(checkbox => checkbox.checked = false);
                updateCart();
            }
        });
    });
</script>